

function raid() {
    if (document.location.href.indexOf("chrome://") >= 0) return;

    var magnetRegex = /([A-F\d]{32,40})\b/i;
    // var magnetBase64 = "data:image/png;base64,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"
    var magnetBase64 = "data:image/png;base64,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"

    function textNodesUnder(node){
        var all = [];
        if (!node) return [];
        for (node=node.firstChild;node;node=node.nextSibling){
            if (node.nodeType==3) all.push(node);
            else all = all.concat(textNodesUnder(node));
        }
        return all;
    }

    function containsInfoHash(node) {
        return magnetRegex.test(node.nodeValue);
    }
    
    var ofInterest = textNodesUnder( document.querySelector('body') ).filter( containsInfoHash );
    var magnets = {};
    
    for (var i=0; i < ofInterest.length; i++) {
        
        var match = ofInterest[i].nodeValue.match( magnetRegex );
        var href = "magnet:?xt=urn:btih:" + match[0] + "&tr=udp%3A%2F%2Ftracker.openbittorrent.com%3A80&tr=udp%3A%2F%2Fopentor.org%3A2710&tr=udp%3A%2F%2Ftracker.ccc.de%3A80&tr=udp%3A%2F%2Ftracker.blackunicorn.xyz%3A6969&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969";
        var title = ofInterest[i].parentElement.closest('.rc').querySelector('.r').innerText
        magnets[ match[0] ] = title;

        if (typeof ofInterest[i].parentNode.href == 'undefined' || ofInterest[i].parentNode.href != href) {
            var link = document.createElement('a');
            link.href = href
            link.setAttribute( "style", "padding-left: 1.5em; font-weight: bold; color: #2330ab; background-size: contain; background-repeat: no-repeat; background-position: left center; width: 1em; height: 1em; background-image: url(" + magnetBase64 + "); font-family: monospace; margin: 0.4em;" );
            link.innerHTML = 'Piratechest: [' + match[0].slice(0, 5) + '...' + match[0].slice(-5) + ']';
            link.title = title;
            var rest = document.createTextNode( match.input.replace(match[0], ""))
            ofInterest[i].parentNode.replaceChild( link, ofInterest[i] );
            link.parentNode.insertBefore( rest, link.nextSibling );
        }
        
    }

    try {
        console.log( 'sending data...')
        chrome.runtime.sendMessage({
            id: "piratechest",
            magnets: magnets,
            url: window.location.href
        }, function(response) {
            // console.log(response);
        });
    } catch(err) { console.info(err)}

}


window.addEventListener("hashchange", function(ev){
    console.log('hashchange', ev)
    raid();
}, false);

raid()

